_format_version: "2.1"


services:
  #
  # POST
    # NEW BACKEND APP
  - name: dice-server
    url: http://host.docker.internal:8080
    plugins:
      - name: cors
        config:
          origins:
            - "*"
      - name: opentelemetry
        config:
          endpoint: http://otel-collector:4318/v1/traces
          propagation:
            extract: ["w3c"]
            # clear: ["traceparent", "tracestate"]
            inject: ["preserve", "w3c"]
            default_format: "w3c"
          resource_attributes:
            service.name: kong-gateway
            service.version: 1.0.0

    routes:
      - name: dice-server
        paths:
          - /api/a1
